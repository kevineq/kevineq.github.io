{"version":3,"file":"js/573.a2539370.js","mappings":"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","sources":["webpack://one-app/./src/views/HpDetailView.vue","webpack://one-app/src/views/HpDetailView.vue","webpack://one-app/./src/views/HpDetailView.vue?6666","webpack://one-app/./src/views/HpDetailView.vue?9a25"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail-view\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.dateStr,\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"arrow-left\",\"size\":\"20\",\"color\":\"#bbb\"},on:{\"click\":_vm.back}})]},proxy:true},{key:\"right\",fn:function(){return [_c('div',{staticClass:\"share\",on:{\"click\":_vm.share}})]},proxy:true}])}),_c('div',{staticClass:\"photograph-container\"},[_c('div',{staticClass:\"photograph-card\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.imgUrl),expression:\"imgUrl\"}]}),_c('div',{staticClass:\"photograph-desc\"},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title)+\" | \"+_vm._s(_vm.picInfo))]),_c('p',{staticClass:\"forward\"},[_vm._v(_vm._s(_vm.forward))]),_c('p',{staticClass:\"words-info\"},[_vm._v(_vm._s(_vm.wordsInfo))])])]),_c('div',{staticClass:\"tool-bar\"},[_vm._m(0),_c('div',{staticClass:\"right-bar\"},[_c('i',{staticClass:\"icon-diary_icon\"}),_c('i',{staticClass:\"icon-bubble_collect\",class:{ active: _vm.isCollect },on:{\"click\":function($event){$event.stopPropagation();return _vm.collect.apply(null, arguments)}}}),_c('div',{staticClass:\"like-box\"},[_c('i',{staticClass:\"icon-feeds_laud_default\",class:{ active: _vm.isLike },on:{\"click\":function($event){$event.stopPropagation();return _vm.like.apply(null, arguments)}}}),_c('span',{ref:\"like\",staticClass:\"like\"},[_vm._v(_vm._s(_vm.likeCount))])]),_c('i',{staticClass:\"icon-feeds_share\",on:{\"click\":function($event){$event.stopPropagation();return _vm.share.apply(null, arguments)}}})])])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"left-bar\"},[_c('i',{staticClass:\"icon-discovery\"}),_vm._v(\"小记\")])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"detail-view\">\r\n    <van-nav-bar :title=\"dateStr\" fixed>\r\n      <template #left>\r\n        <van-icon name=\"arrow-left\" size=\"20\" color=\"#bbb\" @click=\"back\" />\r\n      </template>\r\n      <template #right>\r\n        <div class=\"share\" @click=\"share\"></div>\r\n      </template>\r\n    </van-nav-bar>\r\n\r\n    <div class=\"photograph-container\">\r\n      <div class=\"photograph-card\">\r\n        <img v-lazy=\"imgUrl\" />\r\n        <div class=\"photograph-desc\">\r\n          <h3 class=\"title\">{{ title }} | {{ picInfo }}</h3>\r\n          <p class=\"forward\">{{ forward }}</p>\r\n          <p class=\"words-info\">{{ wordsInfo }}</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"tool-bar\">\r\n        <div class=\"left-bar\"><i class=\"icon-discovery\"></i>小记</div>\r\n        <div class=\"right-bar\">\r\n          <i class=\"icon-diary_icon\"></i>\r\n          <i class=\"icon-bubble_collect\" :class=\"{ active: isCollect }\" @click.stop=\"collect\"></i>\r\n          <div class=\"like-box\">\r\n            <i class=\"icon-feeds_laud_default\" :class=\"{ active: isLike }\" @click.stop=\"like\"></i>\r\n            <span class=\"like\" ref=\"like\">{{ likeCount }}</span>\r\n          </div>\r\n          <i class=\"icon-feeds_share\" @click.stop=\"share\"></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getHpDetail } from \"@/utils/apis/articlecontent\";\r\nimport { monthEnList } from \"@/utils/dateTools\";\r\n\r\nexport default {\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      let keyArr = [];\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        let key = localStorage.key(i);\r\n        if (key.slice(0, 2) == \"hp\") {\r\n          keyArr.push(key.slice(3));\r\n        }\r\n      }\r\n      vm.keyArr = keyArr;\r\n    });\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      imgUrl: \"\",\r\n      title: \"\",\r\n      picInfo: \"\",\r\n      forward: \"\",\r\n      wordsInfo: \"\",\r\n      likeCount: null,\r\n      date: \"\",\r\n      isCollect: false,\r\n      id: \"\",\r\n      volume: \"\",\r\n      keyArr: [],\r\n      isLike: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    dateObj() {\r\n      let res = null;\r\n      let date = new Date(this.date);\r\n      let m = date.getMonth();\r\n      let d = date.getDate();\r\n      d = d >= 10 ? d : \"0\" + d;\r\n      res = {\r\n        year: date.getFullYear(),\r\n        month: monthEnList[m],\r\n        day: d,\r\n      };\r\n      return res.day + \" \" + res.month + \".\" + res.year;\r\n    },\r\n\r\n    dateStr() {\r\n      return this.$route.query.date?.split(\"-\").join(\" / \");\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    collectYesOrNo() {\r\n      this.isCollect = false;\r\n      this.$nextTick(() => {\r\n        let index = this.keyArr.indexOf(this.date);\r\n        if (index > -1) {\r\n          this.isCollect = true;\r\n        }\r\n      });\r\n    },\r\n\r\n    collect() {\r\n      if (this.isCollect == false) {\r\n        let key = \"hp-\" + this.date;\r\n        let value = {\r\n          id: this.id,\r\n          imgUrl: this.imgUrl,\r\n          forward: this.forward,\r\n          volume: this.volume,\r\n          dateObj: this.dateObj,\r\n          date: this.date,\r\n        };\r\n        value = JSON.stringify(value);\r\n        localStorage[key] = value;\r\n        this.isCollect = true;\r\n        this.$toast({\r\n          message: \"已收藏至个人中心\",\r\n          position: \"bottom\",\r\n        });\r\n      } else {\r\n        let key = \"hp-\" + this.date;\r\n        localStorage.removeItem(key);\r\n        this.isCollect = false;\r\n        this.$toast({\r\n          message: \"取消收藏\",\r\n          position: \"bottom\",\r\n        });\r\n      }\r\n    },\r\n\r\n    like() {\r\n      if (this.isLike == false) {\r\n        this.isLike = true;\r\n        this.$refs.like.textContent++;\r\n      } else {\r\n        this.isLike = false;\r\n        this.$refs.like.textContent--;\r\n      }\r\n    },\r\n\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    share() {\r\n      this.$router.push(\"/share\");\r\n    },\r\n\r\n    saveArticleDataUseSessionStorage(date) {\r\n      let key = \"hp-\" + date;\r\n      let value = {\r\n        imgUrl: this.imgUrl,\r\n        title: this.title,\r\n        picInfo: this.picInfo,\r\n        forward: this.forward,\r\n        wordsInfo: this.wordsInfo,\r\n        likeCount: this.likeCount,\r\n        id: this.id,\r\n        volume: this.volume,\r\n      };\r\n      value = JSON.stringify(value);\r\n      sessionStorage[key] = value;\r\n    },\r\n\r\n    getArticleDataAndRatingsData() {\r\n      let date = this.$route.query.date;\r\n      this.date = date;\r\n      let articleData = sessionStorage[\"hp-\" + date];\r\n      if (articleData) {\r\n        // console.log(\"本地\");\r\n        articleData = JSON.parse(articleData);\r\n        this.imgUrl = articleData.imgUrl;\r\n        this.title = articleData.title;\r\n        this.picInfo = articleData.picInfo;\r\n        this.forward = articleData.forward;\r\n        this.wordsInfo = articleData.wordsInfo;\r\n        this.likeCount = articleData.likeCount;\r\n        this.id = articleData.id;\r\n        this.volume = articleData.volume;\r\n      } else {\r\n        // console.log(\"网络\");\r\n        getHpDetail({\r\n          axios: this.$axios,\r\n          date,\r\n        }).then(({ data }) => {\r\n          // console.log(data.data);\r\n          let res = data.data;\r\n          this.imgUrl = res.img_url;\r\n          this.title = res.title;\r\n          this.picInfo = res.pic_info;\r\n          this.forward = res.forward;\r\n          this.wordsInfo = res.words_info;\r\n          this.likeCount = res.like_count;\r\n          this.id = res.item_id;\r\n          this.volume = res.volume;\r\n          this.saveArticleDataUseSessionStorage(date);\r\n        });\r\n      }\r\n    },\r\n  },\r\n\r\n  activated() {\r\n    // console.log(\"页面激活\");\r\n    this.collectYesOrNo();\r\n    let date = this.$route.query.date;\r\n    if (this.date == date) {\r\n      return;\r\n    }\r\n    this.getArticleDataAndRatingsData();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.detail-view {\r\n  position: fixed;\r\n  top: 46px;\r\n  width: 100vw;\r\n  height: calc(100vh - 46px);\r\n  background-color: #fff;\r\n  z-index: 50;\r\n\r\n  .share {\r\n    width: 20px;\r\n    height: 20px;\r\n    background-size: 20px 20px;\r\n    background-image: url(../assets/img/share_image.png);\r\n  }\r\n\r\n  .photograph-container {\r\n    width: 100%;\r\n    padding: 12px;\r\n    background-color: #fff;\r\n\r\n    .photograph-card {\r\n      width: 100%;\r\n\r\n      img {\r\n        border-top-left-radius: 10px;\r\n        border-top-right-radius: 10px;\r\n        width: 100%;\r\n      }\r\n\r\n      .photograph-desc {\r\n        border-bottom-left-radius: 10px;\r\n        border-bottom-right-radius: 10px;\r\n        padding: 10px 20px 30px;\r\n        box-shadow: 0px 1px 9px #ddd;\r\n\r\n        .title,\r\n        .words-info {\r\n          text-align: center;\r\n          font-size: 14px;\r\n          color: #aaa;\r\n        }\r\n\r\n        .forward {\r\n          margin-top: 30px;\r\n          margin-bottom: 100px;\r\n          word-break: break-all;\r\n          font-size: 15px;\r\n          line-height: 28px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .tool-bar {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      margin-top: 10px;\r\n      padding: 10px 5px;\r\n      font-size: 12px;\r\n      color: #999;\r\n      line-height: 20px;\r\n\r\n      .right-bar {\r\n        flex: 1;\r\n        margin-left: 100px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n      }\r\n\r\n      i {\r\n        display: inline-block;\r\n        vertical-align: top;\r\n        margin-right: 3px;\r\n        width: 20px;\r\n        height: 20px;\r\n        background-size: 20px 20px;\r\n        background-position: center center;\r\n        background-repeat: no-repeat;\r\n      }\r\n\r\n      .icon-discovery {\r\n        background-image: url(../assets/img/article/discovery.png);\r\n      }\r\n\r\n      .icon-diary_icon {\r\n        background-image: url(../assets/img/article/diary_icon.png);\r\n      }\r\n\r\n      .icon-bubble_collect {\r\n        background-image: url(../assets/img/article/bubble_collect.png);\r\n        background-size: 16px 20px;\r\n\r\n        &.active {\r\n          background-image: url(../assets/img/article/bubble_collected.png);\r\n        }\r\n      }\r\n\r\n      .icon-feeds_laud_default {\r\n        background-image: url(../assets/img/article/feeds_laud_default.png);\r\n\r\n        &.active {\r\n          background-image: url(../assets/img/article/feeds_laud_selected.png);\r\n        }\r\n      }\r\n\r\n      .icon-feeds_share {\r\n        background-image: url(../assets/img/article/feeds_share.png);\r\n        background-size: 18px 18px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HpDetailView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HpDetailView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HpDetailView.vue?vue&type=template&id=04a9243d&scoped=true&\"\nimport script from \"./HpDetailView.vue?vue&type=script&lang=js&\"\nexport * from \"./HpDetailView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HpDetailView.vue?vue&type=style&index=0&id=04a9243d&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04a9243d\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","dateStr","scopedSlots","_u","key","fn","on","back","proxy","share","directives","name","rawName","value","imgUrl","expression","_v","_s","title","picInfo","forward","wordsInfo","_m","class","active","isCollect","$event","stopPropagation","collect","apply","arguments","isLike","like","ref","likeCount","staticRenderFns","beforeRouteEnter","next","keyArr","vm","data","date","id","volume","computed","dateObj","d","res","year","month","day","methods","collectYesOrNo","localStorage","message","position","saveArticleDataUseSessionStorage","sessionStorage","getArticleDataAndRatingsData","articleData","getHpDetail","axios","activated","component"],"sourceRoot":""}