"use strict";(self["webpackChunkone_app"]=self["webpackChunkone_app"]||[]).push([[573],{7573:function(t,i,s){s.r(i),s.d(i,{default:function(){return d}});var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"detail-view"},[i("van-nav-bar",{attrs:{title:t.dateStr,fixed:""},scopedSlots:t._u([{key:"left",fn:function(){return[i("van-icon",{attrs:{name:"arrow-left",size:"20",color:"#bbb"},on:{click:t.back}})]},proxy:!0},{key:"right",fn:function(){return[i("div",{staticClass:"share",on:{click:t.share}})]},proxy:!0}])}),i("div",{staticClass:"photograph-container"},[i("div",{staticClass:"photograph-card"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl,expression:"imgUrl"}]}),i("div",{staticClass:"photograph-desc"},[i("h3",{staticClass:"title"},[t._v(t._s(t.title)+" | "+t._s(t.picInfo))]),i("p",{staticClass:"forward"},[t._v(t._s(t.forward))]),i("p",{staticClass:"words-info"},[t._v(t._s(t.wordsInfo))])])]),i("div",{staticClass:"tool-bar"},[t._m(0),i("div",{staticClass:"right-bar"},[i("i",{staticClass:"icon-diary_icon"}),i("i",{staticClass:"icon-bubble_collect",class:{active:t.isCollect},on:{click:function(i){return i.stopPropagation(),t.collect.apply(null,arguments)}}}),i("div",{staticClass:"like-box"},[i("i",{staticClass:"icon-feeds_laud_default",class:{active:t.isLike},on:{click:function(i){return i.stopPropagation(),t.like.apply(null,arguments)}}}),i("span",{ref:"like",staticClass:"like"},[t._v(t._s(t.likeCount))])]),i("i",{staticClass:"icon-feeds_share",on:{click:function(i){return i.stopPropagation(),t.share.apply(null,arguments)}}})])])])],1)},a=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"left-bar"},[i("i",{staticClass:"icon-discovery"}),t._v("小记")])}],o=(s(7658),s(4787)),l=s(4399),r={beforeRouteEnter(t,i,s){s((t=>{let i=[];for(let s=0;s<localStorage.length;s++){let t=localStorage.key(s);"hp"==t.slice(0,2)&&i.push(t.slice(3))}t.keyArr=i}))},data(){return{imgUrl:"",title:"",picInfo:"",forward:"",wordsInfo:"",likeCount:null,date:"",isCollect:!1,id:"",volume:"",keyArr:[],isLike:!1}},computed:{dateObj(){let t=null,i=new Date(this.date),s=i.getMonth(),e=i.getDate();return e=e>=10?e:"0"+e,t={year:i.getFullYear(),month:l.y[s],day:e},t.day+" "+t.month+"."+t.year},dateStr(){return this.$route.query.date?.split("-").join(" / ")}},methods:{collectYesOrNo(){this.isCollect=!1,this.$nextTick((()=>{let t=this.keyArr.indexOf(this.date);t>-1&&(this.isCollect=!0)}))},collect(){if(0==this.isCollect){let t="hp-"+this.date,i={id:this.id,imgUrl:this.imgUrl,forward:this.forward,volume:this.volume,dateObj:this.dateObj,date:this.date};i=JSON.stringify(i),localStorage[t]=i,this.isCollect=!0,this.$toast({message:"已收藏至个人中心",position:"bottom"})}else{let t="hp-"+this.date;localStorage.removeItem(t),this.isCollect=!1,this.$toast({message:"取消收藏",position:"bottom"})}},like(){0==this.isLike?(this.isLike=!0,this.$refs.like.textContent++):(this.isLike=!1,this.$refs.like.textContent--)},back(){this.$router.go(-1)},share(){this.$router.push("/share")},saveArticleDataUseSessionStorage(t){let i="hp-"+t,s={imgUrl:this.imgUrl,title:this.title,picInfo:this.picInfo,forward:this.forward,wordsInfo:this.wordsInfo,likeCount:this.likeCount,id:this.id,volume:this.volume};s=JSON.stringify(s),sessionStorage[i]=s},getArticleDataAndRatingsData(){let t=this.$route.query.date;this.date=t;let i=sessionStorage["hp-"+t];i?(i=JSON.parse(i),this.imgUrl=i.imgUrl,this.title=i.title,this.picInfo=i.picInfo,this.forward=i.forward,this.wordsInfo=i.wordsInfo,this.likeCount=i.likeCount,this.id=i.id,this.volume=i.volume):(0,o.XH)({axios:this.$axios,date:t}).then((({data:i})=>{let s=i.data;this.imgUrl=s.img_url,this.title=s.title,this.picInfo=s.pic_info,this.forward=s.forward,this.wordsInfo=s.words_info,this.likeCount=s.like_count,this.id=s.item_id,this.volume=s.volume,this.saveArticleDataUseSessionStorage(t)}))}},activated(){this.collectYesOrNo();let t=this.$route.query.date;this.date!=t&&this.getArticleDataAndRatingsData()}},n=r,c=s(1001),h=(0,c.Z)(n,e,a,!1,null,"04a9243d",null),d=h.exports}}]);
//# sourceMappingURL=573.a2539370.js.map